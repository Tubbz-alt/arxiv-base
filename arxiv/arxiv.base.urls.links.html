
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>arxiv.base.urls.links module &#8212; arXiv base 0.2 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="arxiv.base.agent module" href="arxiv.base.agent.html" />
    <link rel="prev" title="arxiv.base.urls.clickthrough module" href="arxiv.base.urls.clickthrough.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-arxiv.base.urls.links">
<span id="arxiv-base-urls-links-module"></span><h1>arxiv.base.urls.links module<a class="headerlink" href="#module-arxiv.base.urls.links" title="Permalink to this headline">¶</a></h1>
<p>Patterns and functions to detect arXiv ids and URLs in text.</p>
<p>Functions to detect arXiv ids, URLs and DOI in text.
Functions to transform them to &lt;a&gt; tags.</p>
<p>These were originally jinja filters but became a little too big
for that so they were split out and made more general so they didn’t
rely on the Flask context.</p>
<p>There are several classes of patterns we want to match but there is
some overlap in these patterns. To avoid looking for and parsing HTML in each
jinja filter, detecting these patterns is combined.</p>
<p>So far we are looking for:
DOIs            DOI: 10.1145/0001234.1234567
arXiv IDS:      1234.12345 1234.12345v1 hep-ph1307.1843
HTTP URLs:      <a class="reference external" href="http://something.org/myPaper/1234.12345">http://something.org/myPaper/1234.12345</a>
FTP URLs:       <a class="reference external" href="ftp://example.com/files/1234.12345">ftp://example.com/files/1234.12345</a></p>
<p>Just matching for arXiv ids with d{4}.d{4,5} will match several of
these. To deal with this we are prioritizing the matches and
interrupting once one is found.</p>
<p>We should probably match DOIs first because they are the source of a
lot of false positives for arxiv matches.</p>
<p>Updated 18 January, 2019: refactored to combine arXiv + DOI regexes with URL
matching and link generation provided by <a class="reference external" href="https://bleach.readthedocs.io">bleach</a>. The bleach URL regex is extended a bit to
handle FTP addresses.</p>
<p>Updated 20 March, 2019: refactored to provide independent bleach attribute
callbacks for each kind of link.</p>
<dl class="data">
<dt id="arxiv.base.urls.links.BROAD_DOI">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">BROAD_DOI</code><em class="property"> = re.compile('(?P&lt;doi&gt;10\\.\\d{4,5}\\/\\S+)', re.IGNORECASE)</em><a class="headerlink" href="#arxiv.base.urls.links.BROAD_DOI" title="Permalink to this definition">¶</a></dt>
<dd><p>Very broad pattern for matching DOIs in the abs DOI field.</p>
<p>Ex. 10.1175/1520-0469(1996)053&lt;0946:ASTFHH&gt;2.0.CO;2</p>
</dd></dl>

<dl class="data">
<dt id="arxiv.base.urls.links.DEFAULT_KINDS">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">DEFAULT_KINDS</code><em class="property"> = ['arxiv_id', 'doi', 'url']</em><a class="headerlink" href="#arxiv.base.urls.links.DEFAULT_KINDS" title="Permalink to this definition">¶</a></dt>
<dd><p>Default list of identifier types to match and convert to to URLs.</p>
<p>This does not include ‘doi_field because that is a specialized kind
for just the abs DOI field.</p>
</dd></dl>

<dl class="data">
<dt id="arxiv.base.urls.links.DOI">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">DOI</code><em class="property"> = re.compile('(?P&lt;doi&gt;10.\\d{4,9}/[-._;()/:A-Z0-9]+)', re.IGNORECASE)</em><a class="headerlink" href="#arxiv.base.urls.links.DOI" title="Permalink to this definition">¶</a></dt>
<dd><p>Pattern for matching DOIs.</p>
<p>We should probably match DOIs first because they are the source of a
lot of false positives for arxiv id matches.</p>
<p>Only using the most general expression from
<a class="reference external" href="https://www.crossref.org/blog/dois-and-matching-regular-expressions/">https://www.crossref.org/blog/dois-and-matching-regular-expressions/</a></p>
</dd></dl>

<dl class="data">
<dt id="arxiv.base.urls.links.FTP">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">FTP</code><em class="property"> = re.compile('(?P&lt;url&gt;(?:ftp://)(([a-z0-9,_.\\-+~:]|%[a-f0-9]*)|(&#64;))*(?P&lt;PATH&gt;(/([a-z0-9,_.\\-+~:]|%[a-f0-9]*)*)+)?)', re.IGNORECASE)</em><a class="headerlink" href="#arxiv.base.urls.links.FTP" title="Permalink to this definition">¶</a></dt>
<dd><p>Regex to match FTP URLs in text.</p>
</dd></dl>

<dl class="data">
<dt id="arxiv.base.urls.links.IP_ADDRESS">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">IP_ADDRESS</code><em class="property"> = '(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)'</em><a class="headerlink" href="#arxiv.base.urls.links.IP_ADDRESS" title="Permalink to this definition">¶</a></dt>
<dd><p>Regex to match an IP address.</p>
</dd></dl>

<dl class="data">
<dt id="arxiv.base.urls.links.OKCHARS">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">OKCHARS</code><em class="property"> = '([a-z0-9,_.\\-+~:]|%[a-f0-9]*)'</em><a class="headerlink" href="#arxiv.base.urls.links.OKCHARS" title="Permalink to this definition">¶</a></dt>
<dd><p>Characters that are acceptable during PATH, QUERY and ANCHOR parts</p>
</dd></dl>

<dl class="data">
<dt id="arxiv.base.urls.links.PATH">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">PATH</code><em class="property"> = '(?P&lt;PATH&gt;(/([a-z0-9,_.\\-+~:]|%[a-f0-9]*)*)+)?'</em><a class="headerlink" href="#arxiv.base.urls.links.PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Regex for path part of URLs for use in urlize</p>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.links.arxiv_id_to_url">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">arxiv_id_to_url</code><span class="sig-paren">(</span><em class="sig-param">arxiv_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls/links.html#arxiv_id_to_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.links.arxiv_id_to_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an URL for an arXiv ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="data">
<dt id="arxiv.base.urls.links.callbacks">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">callbacks</code><em class="property"> = {'arxiv_id': [&lt;function _handle_arxiv_url&gt;, &lt;function _add_scheme_info&gt;], 'doi': [&lt;function _handle_doi_url&gt;, &lt;function _add_scheme_info&gt;, &lt;function _add_rel_external&gt;], 'doi_field': [&lt;function _handle_doi_url&gt;, &lt;function _add_scheme_info&gt;, &lt;function _add_rel_external&gt;], 'url': [&lt;function _dont_urlize_arxiv_categories&gt;, &lt;function _shorten_label_to_n_characters&gt;, &lt;function _add_rel&gt;, &lt;function _add_scheme_info&gt;, &lt;function _remove_scheme_from_label&gt;]}</em><a class="headerlink" href="#arxiv.base.urls.links.callbacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Bleach attribute callbacks for each kind.</p>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.links.clickthrough_url_for_doi">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">clickthrough_url_for_doi</code><span class="sig-paren">(</span><em class="sig-param">doi</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls/links.html#clickthrough_url_for_doi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.links.clickthrough_url_for_doi" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a clickthrough URL for a DOI.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.links.url_for_doi">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">url_for_doi</code><span class="sig-paren">(</span><em class="sig-param">doi</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls/links.html#url_for_doi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.links.url_for_doi" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an URL for a DOI.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.links.urlize">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">urlize</code><span class="sig-paren">(</span><em class="sig-param">text, kinds=['arxiv_id', 'doi', 'url']</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls/links.html#urlize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.links.urlize" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert URLs and certain identifiers to HTML links.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – Some text containing identifiers and/or URLs.</p></li>
<li><p><strong>kinds</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Names (from <span class="xref std std-ref">SUPPORTED_KINDS</span>) of identifiers to match.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The passed text, with identifiers and/or URLs converted to HTML links.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)">str</a></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.links.urlizer">
<code class="sig-prename descclassname">arxiv.base.urls.links.</code><code class="sig-name descname">urlizer</code><span class="sig-paren">(</span><em class="sig-param">kinds=['arxiv_id', 'doi', 'url']</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls/links.html#urlizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.links.urlizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a function to convert tokens to links.</p>
<p>If the urlizing function is going to be reused, this is more
efficient than urlize because this will only call _get_linker()
once. urlize() will call _get_linker() on each call to urlize(txt)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kinds</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Names (from <span class="xref std std-ref">SUPPORTED_KINDS</span>) of identifiers to match and
convert.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function with signature <code class="docutils literal notranslate"><span class="pre">(str)</span> <span class="pre">-&gt;</span> <span class="pre">str</span></code> that converts identifiers
to HTML links.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.6/library/typing.html#typing.Callable" title="(in Python v3.6)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[[<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>], <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">arXiv base</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">arxiv</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="arxiv.base.html">arxiv.base package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.forms.html">arxiv.forms package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.identifier.html">arxiv.identifier package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.integration.html">arxiv.integration package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.license.html">arxiv.license package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.mail.html">arxiv.mail package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.status.html">arxiv.status package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.taxonomy.html">arxiv.taxonomy package</a></li>
<li class="toctree-l2"><a class="reference internal" href="arxiv.util.html">arxiv.util package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metadocs.html">Meta-documentation: How to create documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">arxiv</a><ul>
  <li><a href="arxiv.base.html">arxiv.base package</a><ul>
  <li><a href="arxiv.base.urls.html">arxiv.base.urls package</a><ul>
      <li>Previous: <a href="arxiv.base.urls.clickthrough.html" title="previous chapter">arxiv.base.urls.clickthrough module</a></li>
      <li>Next: <a href="arxiv.base.agent.html" title="next chapter">arxiv.base.agent module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, arXiv Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/arxiv/arxiv.base.urls.links.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>